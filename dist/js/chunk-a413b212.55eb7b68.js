(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a413b212"],{"1dde":function(e,t,a){var r=a("d039"),o=a("b622"),n=a("2d00"),i=o("species");e.exports=function(e){return n>=51||!r((function(){var t=[],a=t.constructor={};return a[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"461b":function(e,t,a){},"65f0":function(e,t,a){var r=a("861d"),o=a("e8b5"),n=a("b622"),i=n("species");e.exports=function(e,t){var a;return o(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?r(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var r=a("c04e"),o=a("9bf2"),n=a("5c6c");e.exports=function(e,t,a){var i=r(t);i in e?o.f(e,i,n(0,a)):e[i]=a}},"99af":function(e,t,a){"use strict";var r=a("23e7"),o=a("d039"),n=a("e8b5"),i=a("861d"),l=a("7b0b"),c=a("50c4"),s=a("8418"),d=a("65f0"),u=a("1dde"),p=a("b622"),f=a("2d00"),m=p("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",g=f>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=u("concat"),O=function(e){if(!i(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},w=!g||!v;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,r,o,n,i=l(this),u=d(i,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?i:arguments[t],O(n)){if(o=c(n.length),p+o>b)throw TypeError(h);for(a=0;a<o;a++,p++)a in n&&s(u,p,n[a])}else{if(p>=b)throw TypeError(h);s(u,p++,n)}return u.length=p,u}})},b06d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orderList"},[a("ordermodal",{ref:"ordermodal",attrs:{"dialog-visible":e.dialogVisible},on:{"dialog-cancel":function(t){e.dialogVisible=!1}}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ordersList}},[a("el-table-column",{attrs:{label:"訂單時間",prop:"created.datetime",width:"200",sortable:""}}),a("el-table-column",{attrs:{label:"名稱",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"tableColumn"},e._l(t.row.products,(function(t,r){return a("span",{key:r},[e._v(e._s(t.product.title))])})),0)}}])}),a("el-table-column",{attrs:{label:"類別",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"tableColumn"},e._l(t.row.products,(function(t,r){return a("span",{key:r},[e._v(e._s(t.product.category))])})),0)}}])}),a("el-table-column",{attrs:{label:"付款方式",prop:"payment",width:"120",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"總消費金額",prop:"amount",align:"right",width:"120",sortable:""}}),a("el-table-column",{attrs:{label:"是否付款",align:"center",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changePaidStatus(t.row)}},model:{value:t.row.paid,callback:function(a){e.$set(t.row,"paid",a)},expression:"scope.row.paid"}})]}}])}),a("el-table-column",{attrs:{label:"訂單詳細資料",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.openModal(t.row.id)}}},[e._v("點我")])]}}])})],1)],1)},o=[],n=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"訂單資料",visible:e.dialogVisible,top:"0","before-close":e.cancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",{staticClass:"alert"},[e._v("請勿直接修改訂單，"),a("br"),e._v("若尚未付款則重新下單即可，"),a("br"),e._v("已付款者則聯絡退款後重新下單。")]),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"留言事項"}},[a("el-input",{attrs:{placeholder:"無"},model:{value:e.tempOrder.message,callback:function(t){e.$set(e.tempOrder,"message",t)},expression:"tempOrder.message"}})],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.tempOrder.user.name,callback:function(t){e.$set(e.tempOrder.user,"name",t)},expression:"tempOrder.user.name"}})],1),a("el-form-item",{attrs:{label:"email"}},[a("el-input",{model:{value:e.tempOrder.user.email,callback:function(t){e.$set(e.tempOrder.user,"email",t)},expression:"tempOrder.user.email"}})],1),a("el-form-item",{attrs:{label:"電話"}},[a("el-input",{model:{value:e.tempOrder.user.tel,callback:function(t){e.$set(e.tempOrder.user,"tel",t)},expression:"tempOrder.user.tel"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.tempOrder.user.address,callback:function(t){e.$set(e.tempOrder.user,"address",t)},expression:"tempOrder.user.address"}})],1),a("el-form-item",{attrs:{label:"優惠券"}},[a("el-input",{attrs:{placeholder:"無"},model:{value:e.tempOrder.coupon.title,callback:function(t){e.$set(e.tempOrder.coupon,"title",t)},expression:"tempOrder.coupon.title"}})],1),a("el-form-item",{attrs:{label:"折抵%數"}},[a("el-input",{attrs:{placeholder:"無"},model:{value:e.tempOrder.coupon.percent,callback:function(t){e.$set(e.tempOrder.coupon,"percent",t)},expression:"tempOrder.coupon.percent"}})],1),a("el-form-item",{staticClass:"orderModalBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)}),i=[],l={data:function(){return{tempOrder:{message:"",user:{name:"",email:"",tel:"",address:""},coupon:{title:"",percent:""}}}},props:{dialogVisible:{type:Boolean,required:!0}},methods:{cancel:function(){this.$emit("dialog-cancel")},getOrder:function(e){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("f6274412-caf4-4237-aca4-557a5d22b124","/admin/ec/orders/").concat(e);this.axios.get(a).then((function(e){t.tempOrder.message=e.data.data.message,t.tempOrder.user=e.data.data.user,t.tempOrder.coupon.title=e.data.data.coupon.title,t.tempOrder.coupon.percent=e.data.data.coupon.percent})).catch((function(e){console.log(e)}))}}},c=l,s=(a("c92f"),a("2877")),d=Object(s["a"])(c,n,i,!1,null,null,null),u=d.exports,p={name:"orders",components:{ordermodal:u},data:function(){return{dialogVisible:!1,ordersList:[],pagination:{},loading:!1}},created:function(){this.getOrders()},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99999;this.loading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("f6274412-caf4-4237-aca4-557a5d22b124","/admin/ec/orders?paged=").concat(t);this.axios.get(a).then((function(t){e.ordersList=t.data.data,e.pagination=t.data.meta.pagination,e.loading=!1})).catch((function(e){console.log(e)}))},changePaidStatus:function(e){var t=this;this.loading=!0;var a="";a=e.paid?"".concat("https://course-ec-api.hexschool.io","/api/").concat("f6274412-caf4-4237-aca4-557a5d22b124","/admin/ec/orders/").concat(e.id,"/paid"):"".concat("https://course-ec-api.hexschool.io","/api/").concat("f6274412-caf4-4237-aca4-557a5d22b124","/admin/ec/orders/").concat(e.id,"/unpaid"),this.axios.patch(a).then((function(a){t.getOrders(),console.log(e.paid)})).catch((function(e){console.log(e)}))},openModal:function(e){var t=this;this.loading=!0,setTimeout((function(){t.loading=!1,t.dialogVisible=!0}),1500),this.$refs.ordermodal.getOrder(e)}}},f=p,m=(a("de35"),Object(s["a"])(f,r,o,!1,null,null,null));t["default"]=m.exports},c92f:function(e,t,a){"use strict";var r=a("d883"),o=a.n(r);o.a},d883:function(e,t,a){},de35:function(e,t,a){"use strict";var r=a("461b"),o=a.n(r);o.a},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-a413b212.55eb7b68.js.map